---
import { Button } from '@/components/ui/button';
import { getHeroByVariant } from '@/lib/helper';
import { getHeroContent } from '@/lib/queries';
import type { HeroButtonProps } from '@/lib/types';

const hero = await getHeroContent();

// Get specific hero variant
const defaultHero = getHeroByVariant(hero, 'default');

// Add fallback in case the variant doesn't exist
if (!defaultHero) {
  throw new Error('Default hero variant not found in Sanity content');
}
---

<section id="home" class="mt:pt-10">
  <div class="relative z-40">
    <div class="absolute left-0 top-0 h-full w-full bg-black opacity-70"></div>

    <div class="container flex h-screen flex-col items-start justify-center">
      <div class="z-40 max-w-[600px]">
        <h1 class="mb-2 text-600 font-900 leading-[1.3] text-white md:text-900">
          {defaultHero.title}
        </h1>
        <p class="mb-4 text-white md:text-300">
          {defaultHero.subtitle}
        </p>
        {
          defaultHero.button.map((item: HeroButtonProps) => (
            <a href={item.url}>
              <Button className="py-6 font-600"> {item.title} </Button>
            </a>
          ))
        }
      </div>

      {
        defaultHero.imageType === 'upload' ? (
          <img
            class="absolute left-0 -z-10 h-full w-full object-cover"
            src={defaultHero.image?.asset.url}
            alt={defaultHero.image?.alt}
          />
        ) : (
          <img
            class="absolute left-0 -z-10 h-full w-full object-cover"
            src={defaultHero.url}
            alt={defaultHero.image?.alt}
          />
        )
      }
    </div>
  </div>
</section>
